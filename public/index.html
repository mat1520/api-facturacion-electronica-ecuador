<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Facturaci√≥n Electr√≥nica Ecuador - Demo</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 1200px; margin: 0 auto; padding: 20px; }
        .header { background: #1f4e79; color: white; padding: 20px; border-radius: 8px; margin-bottom: 20px; }
        .demo-section { background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0; }
        .endpoint { background: white; padding: 15px; margin: 10px 0; border-left: 4px solid #28a745; }
        .method { display: inline-block; padding: 4px 8px; border-radius: 4px; color: white; font-weight: bold; margin-right: 10px; }
        .get { background: #17a2b8; }
        .post { background: #28a745; }
        code { background: #e9ecef; padding: 2px 4px; border-radius: 3px; }
        .warning { background: #fff3cd; border: 1px solid #ffeaa7; padding: 15px; border-radius: 8px; margin: 20px 0; }
    </style>
</head>
<body>
    <div class="header">
        <h1>üá™üá® API de Facturaci√≥n Electr√≥nica Ecuador</h1>
        <p>Demostraci√≥n funcional desplegada en la nube</p>
    </div>

    <div class="warning">
        <h3>‚ö†Ô∏è Modo Demostraci√≥n</h3>
        <p>Esta API est√° funcionando en <strong>modo demo</strong>. Genera XMLs v√°lidos seg√∫n est√°ndares del SRI pero <strong>no usa certificados reales</strong>.</p>
    </div>

    <div class="demo-section">
        <h2>üîç Endpoints Disponibles</h2>
        
        <div class="endpoint">
            <span class="method get">GET</span>
            <strong>/health</strong> - Health check (sin autenticaci√≥n)
            <br><small>Verifica que la API est√© funcionando correctamente</small>
        </div>

        <div class="endpoint">
            <span class="method get">GET</span>
            <strong>/api/facturas</strong> - Listar facturas
            <br><small>Requiere header: <code>x-api-key: render_demo_api_key_2025_ecuador</code></small>
        </div>

        <div class="endpoint">
            <span class="method post">POST</span>
            <strong>/api/facturas</strong> - Crear nueva factura
            <br><small>Requiere header: <code>x-api-key: render_demo_api_key_2025_ecuador</code></small>
        </div>

        <div class="endpoint">
            <span class="method get">GET</span>
            <strong>/api/facturas/{claveAcceso}</strong> - Consultar factura espec√≠fica
            <br><small>Requiere header: <code>x-api-key: render_demo_api_key_2025_ecuador</code></small>
        </div>
    </div>

    <div class="demo-section">
        <h2>üß™ Ejemplo de uso con JavaScript</h2>
        <pre><code>
// Ejemplo: Crear una factura
const response = await fetch('/api/facturas', {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json',
        'x-api-key': 'render_demo_api_key_2025_ecuador'
    },
    body: JSON.stringify({
        "infoFactura": {
            "razonSocialComprador": "CLIENTE DEMO S.A.",
            "identificacionComprador": "0987654321001",
            "totalSinImpuestos": "100.00",
            "importeTotal": "112.00"
        },
        "detalles": [{
            "descripcion": "Producto demo",
            "cantidad": "1",
            "precioUnitario": "100.00",
            "precioTotalSinImpuesto": "100.00"
        }]
    })
});

const resultado = await response.json();
console.log(resultado);
        </code></pre>
    </div>

    <div class="demo-section">
        <h2>üìã Caracter√≠sticas implementadas</h2>
        <ul>
            <li>‚úÖ Generaci√≥n de XML seg√∫n est√°ndares SRI</li>
            <li>‚úÖ C√°lculo autom√°tico de clave de acceso</li>
            <li>‚úÖ Validaci√≥n completa de datos</li>
            <li>‚úÖ API RESTful con autenticaci√≥n</li>
            <li>‚úÖ Respuestas estructuradas</li>
            <li>‚ö†Ô∏è Firma digital simulada (requiere certificado real)</li>
            <li>‚ö†Ô∏è Env√≠o al SRI simulado (requiere certificado real)</li>
        </ul>
    </div>

    <div class="demo-section">
        <h2>üöÄ Repositorio y C√≥digo</h2>
        <p>C√≥digo fuente disponible en: <a href="https://github.com/mat1520/api-facturacion-electronica-ecuador" target="_blank">GitHub</a></p>
        <p>Desarrollado por: <strong>@mat1520</strong></p>
    </div>

    <script>
        // Funci√≥n simple para probar el health check
        async function testHealthCheck() {
            try {
                const response = await fetch('/health');
                const data = await response.json();
                console.log('Health Check:', data);
                alert('API funcionando: ' + data.message);
            } catch (error) {
                console.error('Error:', error);
                alert('Error al conectar con la API');
            }
        }
        
        // Agregar bot√≥n de prueba
        document.addEventListener('DOMContentLoaded', function() {
            const button = document.createElement('button');
            button.textContent = 'üß™ Probar Health Check';
            button.onclick = testHealthCheck;
            button.style.cssText = 'background: #28a745; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin: 20px 0;';
            document.querySelector('.demo-section').appendChild(button);
        });
    </script>
</body>
</html>
